<Window x:Class="GunVault.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GunVault"
        mc:Ignorable="d"
        Title="GunVault - Рогалик" Height="720" Width="1280" 
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        ResizeMode="CanResize"
        KeyDown="Window_KeyDown" 
        KeyUp="Window_KeyUp"
        SizeChanged="Window_SizeChanged">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Панель информации об игроке -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#333333" Height="70" Panel.ZIndex="1000">
            <Grid Margin="20,5,0,5" Width="200">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Здоровье игрока -->
                <TextBlock Grid.Row="0" x:Name="HealthText" Text="Здоровье: 100/100" Foreground="White" FontSize="14" VerticalAlignment="Center"/>
                <ProgressBar Grid.Row="1" x:Name="HealthBar" Height="8" Value="100" Maximum="100" Foreground="Green" Background="#33FFFFFF" Margin="0,2,0,5"/>
                
                <!-- Броня игрока -->
                <TextBlock Grid.Row="2" x:Name="ArmorText" Text="Броня: 0/100" Foreground="White" FontSize="14" VerticalAlignment="Center"/>
                <ProgressBar Grid.Row="3" x:Name="ArmorBar" Height="8" Value="0" Maximum="100" Foreground="DodgerBlue" Background="#33FFFFFF" Margin="0,2,0,0"/>
            </Grid>
            
            <TextBlock x:Name="WeaponText" Text="Оружие: Пистолет" Foreground="White" FontSize="18" Margin="40,0,0,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="AmmoText" Text="Патроны: 12/12" Foreground="White" FontSize="18" Margin="40,0,0,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="ScoreText" Text="Счёт: 0" Foreground="White" FontSize="18" Margin="40,0,0,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="DebugInfoText" Text="Отладка" Foreground="#AAFFAA" FontSize="16" Margin="40,0,0,0" VerticalAlignment="Center" Visibility="Collapsed"/>
        </StackPanel>
        
        <!-- Игровое поле -->
        <Canvas x:Name="GameCanvas" Grid.Row="1" Background="#222222" Focusable="True" Panel.ZIndex="0"/>
        
        <!-- Экран загрузки -->
        <Grid x:Name="LoadingScreen" Grid.Row="1" Visibility="Collapsed" Panel.ZIndex="2000">
            <!-- Градиентный фон -->
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#0F0F1E" Offset="0"/>
                    <GradientStop Color="#1A1A2E" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
            
            <!-- Анимированные частицы (декоративные элементы) -->
            <Canvas x:Name="ParticlesCanvas">
                <!-- Частицы добавляются динамически -->
                <Ellipse Width="4" Height="4" Fill="#3498db" Canvas.Left="100" Canvas.Top="100" Opacity="0.6"/>
                <Ellipse Width="3" Height="3" Fill="#2ecc71" Canvas.Left="200" Canvas.Top="150" Opacity="0.5"/>
                <Ellipse Width="5" Height="5" Fill="#e74c3c" Canvas.Left="300" Canvas.Top="200" Opacity="0.7"/>
                <Ellipse Width="2" Height="2" Fill="#f1c40f" Canvas.Left="400" Canvas.Top="250" Opacity="0.4"/>
                <Ellipse Width="4" Height="4" Fill="#9b59b6" Canvas.Left="500" Canvas.Top="300" Opacity="0.6"/>
            </Canvas>
            
            <!-- Основной контент экрана загрузки -->
            <StackPanel VerticalAlignment="Center" Margin="0,-50,0,0">
                <!-- Логотип игры -->
                <Border Width="200" Height="200" Background="Transparent" Margin="0,0,0,30" HorizontalAlignment="Center">
                    <Border.Effect>
                        <DropShadowEffect Color="#FFD700" BlurRadius="20" ShadowDepth="0"/>
                    </Border.Effect>
                    <Grid>
                        <!-- Внешнее кольцо -->
                        <Ellipse Stroke="#FFD700" StrokeThickness="4" Width="200" Height="200">
                            <Ellipse.Effect>
                                <BlurEffect Radius="2"/>
                            </Ellipse.Effect>
                        </Ellipse>
                        
                        <!-- Внутреннее кольцо (вращающееся) -->
                        <Ellipse x:Name="RotatingRing" Stroke="#FFD700" StrokeThickness="2" Width="160" Height="160">
                            <Ellipse.RenderTransform>
                                <RotateTransform x:Name="RingRotation" CenterX="80" CenterY="80"/>
                            </Ellipse.RenderTransform>
                            <Ellipse.Triggers>
                                <EventTrigger RoutedEvent="Ellipse.Loaded">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="RingRotation" 
                                                             Storyboard.TargetProperty="Angle"
                                                             From="0" To="360" Duration="0:0:4"
                                                             RepeatBehavior="Forever"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Ellipse.Triggers>
                        </Ellipse>
                        
                        <!-- Иконка оружия в центре -->
                        <Path Data="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z" 
                              Fill="#FFD700" Width="80" Height="80" Stretch="Uniform"/>
                    </Grid>
                </Border>
                
                <!-- Название игры -->
                <TextBlock Text="GUN VAULT" Foreground="#FFD700" FontSize="48" FontWeight="Bold" 
                           HorizontalAlignment="Center" Margin="0,0,0,20">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="#FFD700" BlurRadius="10" ShadowDepth="0"/>
                    </TextBlock.Effect>
                </TextBlock>
                
                <!-- Анимированный текст загрузки -->
                <TextBlock x:Name="LoadingStatusText" Text="Инициализация..." Foreground="White" 
                           FontSize="20" HorizontalAlignment="Center" Margin="0,20,0,20">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="White" BlurRadius="5" ShadowDepth="0"/>
                    </TextBlock.Effect>
                </TextBlock>
                
                <!-- Стилизованный прогресс-бар -->
                <Border Width="500" Height="10" Background="#333333" CornerRadius="5" Margin="0,10,0,10">
                    <Border x:Name="ProgressIndicator" Background="#FFD700" HorizontalAlignment="Left" Width="0" CornerRadius="5">
                        <Border.Effect>
                            <BlurEffect Radius="2"/>
                        </Border.Effect>
                    </Border>
                </Border>
                
                <!-- Процент загрузки -->
                <TextBlock x:Name="LoadingProgressText" Text="0%" Foreground="White" 
                           FontSize="18" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                
                <!-- Подсказка -->
                <TextBlock Text="Подготовка к приключению..." Foreground="#AAAAAA" 
                           FontSize="16" HorizontalAlignment="Center" Margin="0,30,0,0"/>
            </StackPanel>
            
            <!-- Скрытый ProgressBar для сохранения функциональности -->
            <ProgressBar x:Name="LoadingProgressBar" Width="0" Height="0" Visibility="Collapsed"/>
        </Grid>
        
        <!-- Уведомление о новом оружии -->
        <Border x:Name="WeaponNotification" Grid.Row="1" Visibility="Collapsed" Background="#80000000" 
                HorizontalAlignment="Center" VerticalAlignment="Top" CornerRadius="0,0,10,10"
                Padding="20,15" MaxWidth="500" BorderBrush="#FFD700" BorderThickness="0,0,2,2"
                Panel.ZIndex="1000" Margin="0,0,0,0">
            <StackPanel>
                <TextBlock Text="НОВОЕ ОРУЖИЕ!" Foreground="#FFD700" FontSize="20" FontWeight="Bold" 
                           HorizontalAlignment="Center" Margin="0,0,0,10"/>
                <TextBlock x:Name="NotificationWeaponName" Text="Название оружия" Foreground="White" 
                           FontSize="18" HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
        
        <!-- Экран смерти с меню -->
        <Grid x:Name="DeathScreen" Grid.Row="1" Visibility="Collapsed" Panel.ZIndex="3000">
            <!-- Затемнение экрана -->
            <Rectangle Fill="#CC000000" Width="{Binding ActualWidth, ElementName=GameCanvas}" 
                       Height="{Binding ActualHeight, ElementName=GameCanvas}"/>
            
            <!-- Контент экрана смерти -->
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <!-- Анимированный текст смерти -->
                <TextBlock Text="ВЫ ПОГИБЛИ" Foreground="#FF0000" FontSize="48" FontWeight="Bold" 
                           HorizontalAlignment="Center" Margin="0,0,0,50">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="#FF0000" BlurRadius="15" ShadowDepth="0"/>
                    </TextBlock.Effect>
                    <TextBlock.RenderTransform>
                        <ScaleTransform x:Name="DeathTextScale" ScaleX="1" ScaleY="1" CenterX="120" CenterY="30"/>
                    </TextBlock.RenderTransform>
                    <TextBlock.Triggers>
                        <EventTrigger RoutedEvent="TextBlock.Loaded">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="DeathTextScale" 
                                                     Storyboard.TargetProperty="ScaleX"
                                                     From="1" To="1.05" Duration="0:0:1"
                                                     AutoReverse="True" RepeatBehavior="Forever"/>
                                    <DoubleAnimation Storyboard.TargetName="DeathTextScale" 
                                                     Storyboard.TargetProperty="ScaleY"
                                                     From="1" To="1.05" Duration="0:0:1"
                                                     AutoReverse="True" RepeatBehavior="Forever"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </TextBlock.Triggers>
                </TextBlock>
                
                <!-- Статистика игры -->
                <Border Background="#80000000" CornerRadius="10" Padding="30,20" Margin="0,0,0,40">
                    <StackPanel>
                        <TextBlock Text="СТАТИСТИКА" Foreground="#FFFFFF" FontSize="24" FontWeight="Bold" 
                                   HorizontalAlignment="Center" Margin="0,0,0,20"/>
                        <TextBlock x:Name="DeathScoreText" Text="Счёт: 0" Foreground="#FFFFFF" FontSize="18" 
                                   HorizontalAlignment="Left" Margin="0,5,0,5"/>
                        <TextBlock x:Name="DeathTimeText" Text="Время игры: 00:00" Foreground="#FFFFFF" FontSize="18" 
                                   HorizontalAlignment="Left" Margin="0,5,0,5"/>
                        <TextBlock x:Name="DeathKillsText" Text="Убито врагов: 0" Foreground="#FFFFFF" FontSize="18" 
                                   HorizontalAlignment="Left" Margin="0,5,0,5"/>
                    </StackPanel>
                </Border>
                
                <!-- Кнопки меню -->
                <Button x:Name="RestartButton" Content="НАЧАТЬ СНАЧАЛА" Width="300" Height="50" 
                        Background="#3498db" Foreground="White" FontSize="20" FontWeight="Bold" 
                        Margin="0,10,0,10" Click="RestartButton_Click">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="5"/>
                        </Style>
                    </Button.Resources>
                </Button>
                
                <Button x:Name="ExitButton" Content="ВЫЙТИ" Width="300" Height="50" 
                        Background="#e74c3c" Foreground="White" FontSize="20" FontWeight="Bold" 
                        Margin="0,10,0,10" Click="ExitButton_Click">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="5"/>
                        </Style>
                    </Button.Resources>
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
